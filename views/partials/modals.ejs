<!-- MODAL SPECIES -->
<div class="modal fade" id="speciesModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="bi bi-bug"></i>
          <span id="speciesModalTitle">Créer une espèce</span>
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="speciesForm">
          <input type="hidden" id="speciesId">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="speciesFr" class="form-label">Nom français *</label>
              <input type="text" class="form-control" id="speciesFr" placeholder="ex: pipistrelle_commune" pattern="^[a-z]+(_[a-z]+)*$" title="Format snake_case requis (ex: pipistrelle_commune)" required>
              <div class="form-text">Format snake_case (ex: pipistrelle_commune)</div>
            </div>
            <div class="col-md-6 mb-3">
              <label for="speciesLat" class="form-label">Nom latin *</label>
              <input type="text" class="form-control" id="speciesLat" placeholder="ex: pipistrellus_pipistrellus" pattern="^[a-z]+(_[a-z]+)*$" title="Format snake_case requis (ex: pipistrellus_pipistrellus)" required>
              <div class="form-text">Format snake_case (ex: pipistrellus_pipistrellus)</div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="speciesEn" class="form-label">Nom anglais</label>
              <input type="text" class="form-control" id="speciesEn" placeholder="ex: common_pipistrelle" pattern="^[a-z]+(_[a-z]+)*$" title="Format snake_case requis (ex: common_pipistrelle)">
              <div class="form-text">Format snake_case (ex: common_pipistrelle)</div>
            </div>
            <div class="col-md-6 mb-3">
              <label for="family" class="form-label">Famille</label>
              <input type="text" class="form-control" id="family" placeholder="Famille">
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="genus" class="form-label">Genre</label>
              <input type="text" class="form-control" id="genus" placeholder="Genre">
            </div>
            <div class="col-md-3 mb-3">
              <div class="form-check mt-4">
                <input class="form-check-input" type="checkbox" id="inFrance">
                <label class="form-check-label" for="inFrance">En France</label>
              </div>
            </div>
            <div class="col-md-3 mb-3">
              <div class="form-check mt-4">
                <input class="form-check-input" type="checkbox" id="inEurope">
                <label class="form-check-label" for="inEurope">En Europe</label>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-success" id="saveSpeciesBtn">
          <i class="bi bi-save"></i> Enregistrer
        </button>
      </div>
    </div>
  </div>
</div>

<!-- MODAL BIBLIOGRAPHY -->
<div class="modal fade" id="bibliographyModal" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="bi bi-book"></i>
          <span id="bibliographyModalTitle">Créer une bibliographie</span>
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
        <form id="bibliographyForm">
          <input type="hidden" id="bibliographyId">

          <div class="mb-3">
            <label for="bibliographySpeciesSelect" class="form-label">Espèces liées *</label>
            <select class="form-select" id="bibliographySpeciesSelect" multiple size="5" required>
              <!-- Les espèces seront chargées dynamiquement -->
            </select>
            <div class="form-text">Maintenez Ctrl (ou Cmd sur Mac) pour sélectionner plusieurs espèces</div>
          </div>

          <h6 class="border-bottom pb-2 mb-3">Informations générales</h6>
          <div class="row">
            <div class="col-md-12 mb-3">
              <label for="citation" class="form-label">Citation</label>
              <textarea class="form-control" id="citation" rows="2" placeholder="Citation"></textarea>
            </div>
            <div class="col-md-12 mb-3">
              <label for="reference" class="form-label">Référence</label>
              <textarea class="form-control" id="reference" rows="2" placeholder="Référence"></textarea>
            </div>
          </div>

          <h6 class="border-bottom pb-2 mb-3 mt-4">Détails de l'étude</h6>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label for="publicationDate" class="form-label">Date de publication</label>
              <input type="text" class="form-control" id="publicationDate" placeholder="Date de publication">
            </div>
            <div class="col-md-4 mb-3">
              <label for="country" class="form-label">Pays</label>
              <input type="text" class="form-control" id="country" placeholder="Pays">
            </div>
            <div class="col-md-4 mb-3">
              <label for="region" class="form-label">Région</label>
              <input type="text" class="form-control" id="region" placeholder="Région">
            </div>
          </div>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label for="studyDuration" class="form-label">Durée de l'étude</label>
              <input type="text" class="form-control" id="studyDuration" placeholder="Durée de l'étude">
            </div>
            <div class="col-md-4 mb-3">
              <label for="datesOfTheStudy" class="form-label">Dates de l'étude</label>
              <input type="text" class="form-control" id="datesOfTheStudy" placeholder="Dates de l'étude">
            </div>
            <div class="col-md-4 mb-3">
              <label for="season" class="form-label">Saison</label>
              <input type="text" class="form-control" id="season" placeholder="Saison">
            </div>
          </div>

          <h6 class="border-bottom pb-2 mb-3 mt-4">Échantillonnage</h6>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label for="sampleSize" class="form-label">Taille de l'échantillon</label>
              <input type="number" step="0.01" class="form-control" id="sampleSize" placeholder="Taille de l'échantillon">
            </div>
            <div class="col-md-4 mb-3">
              <label for="numberMalesSampled" class="form-label">Nombre de mâles</label>
              <input type="number" step="0.01" class="form-control" id="numberMalesSampled" placeholder="Nombre de mâles">
            </div>
            <div class="col-md-4 mb-3">
              <label for="numberFemalesSampled" class="form-label">Nombre de femelles</label>
              <input type="number" step="0.01" class="form-control" id="numberFemalesSampled" placeholder="Nombre de femelles">
            </div>
          </div>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label for="areaSizeHa" class="form-label">Superficie (ha)</label>
              <input type="number" step="0.01" class="form-control" id="areaSizeHa" placeholder="Superficie en hectares">
            </div>
            <div class="col-md-4 mb-3">
              <label for="meanRecaptureProbability" class="form-label">Prob. recapture (moyenne)</label>
              <input type="number" step="0.0001" class="form-control" id="meanRecaptureProbability" placeholder="Probabilité moyenne">
            </div>
            <div class="col-md-4 mb-3">
              <label for="sdMeanRecaptureProbability" class="form-label">Prob. recapture (SD)</label>
              <input type="number" step="0.0001" class="form-control" id="sdMeanRecaptureProbability" placeholder="Écart-type">
            </div>
          </div>

          <h6 class="border-bottom pb-2 mb-3 mt-4">Méthodologie</h6>
          <div class="mb-3">
            <label for="methodologyUsed" class="form-label">Méthodologie utilisée</label>
            <textarea class="form-control" id="methodologyUsed" rows="2" placeholder="Méthodologie utilisée"></textarea>
          </div>
          <div class="mb-3">
            <label for="modelUsed" class="form-label">Modèle utilisé</label>
            <textarea class="form-control" id="modelUsed" rows="2" placeholder="Modèle utilisé"></textarea>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="captureMethod" class="form-label">Méthode de capture</label>
              <textarea class="form-control" id="captureMethod" rows="2" placeholder="Méthode de capture"></textarea>
            </div>
            <div class="col-md-6 mb-3">
              <label for="markingMethod" class="form-label">Méthode de marquage</label>
              <textarea class="form-control" id="markingMethod" rows="2" placeholder="Méthode de marquage"></textarea>
            </div>
          </div>
          <div class="mb-3">
            <label for="captureFrequency" class="form-label">Fréquence de capture</label>
            <textarea class="form-control" id="captureFrequency" rows="2" placeholder="Fréquence de capture"></textarea>
          </div>

          <h6 class="border-bottom pb-2 mb-3 mt-4">Notes et fiabilité</h6>
          <div class="mb-3">
            <label for="biasesAndProblems" class="form-label">Biais et problèmes</label>
            <textarea class="form-control" id="biasesAndProblems" rows="2" placeholder="Biais et problèmes identifiés"></textarea>
          </div>
          <div class="mb-3">
            <label for="otherNote" class="form-label">Autres notes</label>
            <textarea class="form-control" id="otherNote" rows="2" placeholder="Autres notes"></textarea>
          </div>
          <div class="mb-3">
            <label for="reliability" class="form-label">Fiabilité</label>
            <input type="text" class="form-control" id="reliability" placeholder="Niveau de fiabilité">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-success" id="saveBibliographyBtn">
          <i class="bi bi-save"></i> Enregistrer
        </button>
      </div>
    </div>
  </div>
</div>

<!-- MODAL AGE GROUP -->
<div class="modal fade" id="ageGroupModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="bi bi-people"></i>
          <span id="ageGroupModalTitle">Créer un groupe d'âge</span>
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="ageGroupForm">
          <input type="hidden" id="ageGroupId">
          <div class="mb-3">
            <label for="ageGroup" class="form-label">Groupe d'âge</label>
            <input type="text" class="form-control" id="ageGroup" placeholder="Groupe d'âge">
          </div>
          <div class="mb-3">
            <label for="consideredAs" class="form-label">Considéré comme</label>
            <input type="text" class="form-control" id="consideredAs" placeholder="Ex: Juvénile, Adulte, etc.">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-success" id="saveAgeGroupBtn">
          <i class="bi bi-save"></i> Enregistrer
        </button>
      </div>
    </div>
  </div>
</div>

<!-- MODAL SURVIVAL -->
<div class="modal fade" id="survivalModal" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="bi bi-heart-pulse"></i>
          <span id="survivalModalTitle">Ajouter données de survie</span>
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
        <form id="survivalForm">
          <input type="hidden" id="survivalId">

          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="survivalAgeGroup" class="form-label">Groupe d'âge</label>
              <input type="text" class="form-control" id="survivalAgeGroup" placeholder="Groupe d'âge">
            </div>
            <div class="col-md-6 mb-3">
              <label for="ageGroupConsideredSurvival" class="form-label">Considéré dans la publication</label>
              <input type="text" class="form-control" id="ageGroupConsideredSurvival" placeholder="Considéré comme">
            </div>
          </div>

          <div class="mb-3">
            <label for="sex" class="form-label">Sexe</label>
            <select class="form-select" id="sex">
              <option value="">-- Sélectionner --</option>
              <option value="Male">Mâle</option>
              <option value="Female">Femelle</option>
              <option value="Both">Les deux</option>
            </select>
          </div>

          <h6 class="border-bottom pb-2 mb-3">Taux de survie</h6>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label for="minSurvivalRate" class="form-label">Min</label>
              <input type="number" step="0.0001" class="form-control" id="minSurvivalRate" placeholder="Minimum">
            </div>
            <div class="col-md-4 mb-3">
              <label for="meanSurvivalRate" class="form-label">Moyenne</label>
              <input type="number" step="0.0001" class="form-control" id="meanSurvivalRate" placeholder="Moyenne">
            </div>
            <div class="col-md-4 mb-3">
              <label for="maxSurvivalRate" class="form-label">Max</label>
              <input type="number" step="0.0001" class="form-control" id="maxSurvivalRate" placeholder="Maximum">
            </div>
          </div>

          <div class="mb-3">
            <label for="recaptureProbability" class="form-label">Probabilité de recapture</label>
            <input type="number" step="0.0001" class="form-control" id="recaptureProbability" placeholder="Probabilité de recapture">
          </div>

          <h6 class="border-bottom pb-2 mb-3">Longévité (années)</h6>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label for="minLongevityYears" class="form-label">Min</label>
              <input type="number" step="0.01" class="form-control" id="minLongevityYears" placeholder="Minimum">
            </div>
            <div class="col-md-4 mb-3">
              <label for="meanLongevityYears" class="form-label">Moyenne</label>
              <input type="number" step="0.01" class="form-control" id="meanLongevityYears" placeholder="Moyenne">
            </div>
            <div class="col-md-4 mb-3">
              <label for="maxLongevityYears" class="form-label">Max</label>
              <input type="number" step="0.01" class="form-control" id="maxLongevityYears" placeholder="Maximum">
            </div>
          </div>

          <h6 class="border-bottom pb-2 mb-3 mt-4">Données de confiance par champ</h6>
          <div class="table-responsive">
            <table class="table table-sm table-bordered">
              <thead class="table-light">
                <tr>
                  <th>Champ</th>
                  <th>SE</th>
                  <th>Low CI</th>
                  <th>High CI</th>
                  <th>Data Quality</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Min Survival Rate</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minSurvivalRateSe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minSurvivalRateLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minSurvivalRateHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="minSurvivalRateDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Mean Survival Rate</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanSurvivalRateSe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanSurvivalRateLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanSurvivalRateHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="meanSurvivalRateDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Max Survival Rate</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxSurvivalRateSe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxSurvivalRateLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxSurvivalRateHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="maxSurvivalRateDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Recapture Probability</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="recaptureProbabilitySe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="recaptureProbabilityLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="recaptureProbabilityHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="recaptureProbabilityDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Min Longevity Years</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minLongevityYearsSe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minLongevityYearsLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minLongevityYearsHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="minLongevityYearsDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Mean Longevity Years</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanLongevityYearsSe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanLongevityYearsLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanLongevityYearsHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="meanLongevityYearsDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Max Longevity Years</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxLongevityYearsSe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxLongevityYearsLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxLongevityYearsHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="maxLongevityYearsDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-success" id="saveSurvivalBtn">
          <i class="bi bi-save"></i> Enregistrer
        </button>
      </div>
    </div>
  </div>
</div>

<!-- MODAL FECUNDITY -->
<div class="modal fade" id="fecundityModal" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="bi bi-egg"></i>
          <span id="fecundityModalTitle">Ajouter données de fécondité</span>
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
        <form id="fecundityForm">
          <input type="hidden" id="fecundityId">

          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="fecundityAgeGroup" class="form-label">Groupe d'âge</label>
              <input type="text" class="form-control" id="fecundityAgeGroup" placeholder="Groupe d'âge">
            </div>
            <div class="col-md-6 mb-3">
              <label for="ageGroupConsideredFecundity" class="form-label">Considéré dans la publication</label>
              <input type="text" class="form-control" id="ageGroupConsideredFecundity" placeholder="Considéré comme">
            </div>
          </div>

          <h6 class="border-bottom pb-2 mb-3">Taux de fécondité</h6>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label for="minFecundityRate" class="form-label">Min</label>
              <input type="number" step="0.0001" class="form-control" id="minFecundityRate" placeholder="Minimum">
            </div>
            <div class="col-md-4 mb-3">
              <label for="meanFecundityRate" class="form-label">Moyenne</label>
              <input type="number" step="0.0001" class="form-control" id="meanFecundityRate" placeholder="Moyenne">
            </div>
            <div class="col-md-4 mb-3">
              <label for="maxFecundityRate" class="form-label">Max</label>
              <input type="number" step="0.0001" class="form-control" id="maxFecundityRate" placeholder="Maximum">
            </div>
          </div>

          <h6 class="border-bottom pb-2 mb-3">Productivité</h6>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label for="minProductivity" class="form-label">Min</label>
              <input type="number" step="0.0001" class="form-control" id="minProductivity" placeholder="Minimum">
            </div>
            <div class="col-md-4 mb-3">
              <label for="meanProductivity" class="form-label">Moyenne</label>
              <input type="number" step="0.0001" class="form-control" id="meanProductivity" placeholder="Moyenne">
            </div>
            <div class="col-md-4 mb-3">
              <label for="maxProductivity" class="form-label">Max</label>
              <input type="number" step="0.0001" class="form-control" id="maxProductivity" placeholder="Maximum">
            </div>
          </div>

          <h6 class="border-bottom pb-2 mb-3 mt-4">Données de confiance par champ</h6>
          <div class="table-responsive">
            <table class="table table-sm table-bordered">
              <thead class="table-light">
                <tr>
                  <th>Champ</th>
                  <th>SE</th>
                  <th>Low CI</th>
                  <th>High CI</th>
                  <th>Data Quality</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Min Fecundity Rate</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minFecundityRateSe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minFecundityRateLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minFecundityRateHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="minFecundityRateDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Mean Fecundity Rate</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanFecundityRateSe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanFecundityRateLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanFecundityRateHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="meanFecundityRateDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Max Fecundity Rate</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxFecundityRateSe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxFecundityRateLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxFecundityRateHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="maxFecundityRateDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Min Productivity</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minProductivitySe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minProductivityLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="minProductivityHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="minProductivityDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Mean Productivity</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanProductivitySe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanProductivityLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="meanProductivityHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="meanProductivityDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Max Productivity</strong></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxProductivitySe" placeholder="SE"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxProductivityLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.0001" class="form-control form-control-sm" id="maxProductivityHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="maxProductivityDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-success" id="saveFecundityBtn">
          <i class="bi bi-save"></i> Enregistrer
        </button>
      </div>
    </div>
  </div>
</div>

<!-- MODAL DISPERSAL DISTANCE -->
<div class="modal fade" id="dispersalModal" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="bi bi-arrows-move"></i>
          Distance de dispersion
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
        <form id="dispersalForm">
          <input type="hidden" id="dispersalId">

          <h6 class="border-bottom pb-2 mb-3">Distance de dispersion (km)</h6>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label for="minDispersalDistance" class="form-label">Min</label>
              <input type="number" step="0.01" class="form-control" id="minDispersalDistance" placeholder="Minimum">
            </div>
            <div class="col-md-4 mb-3">
              <label for="meanDispersalDistance" class="form-label">Moyenne</label>
              <input type="number" step="0.01" class="form-control" id="meanDispersalDistance" placeholder="Moyenne">
            </div>
            <div class="col-md-4 mb-3">
              <label for="maxDispersalDistance" class="form-label">Max</label>
              <input type="number" step="0.01" class="form-control" id="maxDispersalDistance" placeholder="Maximum">
            </div>
          </div>

          <h6 class="border-bottom pb-2 mb-3 mt-4">Données de confiance par champ</h6>
          <div class="table-responsive">
            <table class="table table-sm table-bordered">
              <thead class="table-light">
                <tr>
                  <th>Champ</th>
                  <th>SE</th>
                  <th>Low CI</th>
                  <th>High CI</th>
                  <th>Data Quality</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Min Dispersal Distance</strong></td>
                  <td><input type="number" step="0.01" class="form-control form-control-sm" id="minDispersalDistanceSe" placeholder="SE"></td>
                  <td><input type="number" step="0.01" class="form-control form-control-sm" id="minDispersalDistanceLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.01" class="form-control form-control-sm" id="minDispersalDistanceHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="minDispersalDistanceDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Mean Dispersal Distance</strong></td>
                  <td><input type="number" step="0.01" class="form-control form-control-sm" id="meanDispersalDistanceSe" placeholder="SE"></td>
                  <td><input type="number" step="0.01" class="form-control form-control-sm" id="meanDispersalDistanceLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.01" class="form-control form-control-sm" id="meanDispersalDistanceHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="meanDispersalDistanceDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td><strong>Max Dispersal Distance</strong></td>
                  <td><input type="number" step="0.01" class="form-control form-control-sm" id="maxDispersalDistanceSe" placeholder="SE"></td>
                  <td><input type="number" step="0.01" class="form-control form-control-sm" id="maxDispersalDistanceLowCI" placeholder="Low CI"></td>
                  <td><input type="number" step="0.01" class="form-control form-control-sm" id="maxDispersalDistanceHighCI" placeholder="High CI"></td>
                  <td>
                    <select class="form-select form-select-sm" id="maxDispersalDistanceDataQuality">
                      <option value="">--</option>
                      <option value="low">low</option>
                      <option value="questionnable">questionnable</option>
                      <option value="acceptable">acceptable</option>
                      <option value="high">high</option>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-success" id="saveDispersalBtn">
          <i class="bi bi-save"></i> Enregistrer
        </button>
      </div>
    </div>
  </div>
</div>

